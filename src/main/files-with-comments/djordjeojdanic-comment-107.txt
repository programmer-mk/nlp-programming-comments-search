/// Klasa za lepo ispisivanje json-a

public class PrettyPrintJSON
    {
        /// <summary>
        /// Ova metoda vraca json string lepo prikazan.
        /// </summary>
        /// <param name="jsonString"></param>
        /// <returns></returns>
        public string GetPrettyJSONDisplay(string jsonString) 
        {
            var prettyJson = JsonConvert.SerializeObject(jsonString, Formatting.Indented);
            return prettyJson;
        }

        /// <summary>
        /// Lepo formatira prosledjeni json string i vraca novu vrednost.
        /// </summary>
        /// <param name="unprettyJson"></param>
        /// <returns></returns>
        public string GetPrettyJson(string unprettyJson)
        {
            var options = new JsonSerializerOptions()
            {
                WriteIndented = true
            };

            var jsonElement = JsonSerializer.Deserialize<JsonElement>(unprettyJson);

            string output = JsonSerializer.Serialize(jsonElement, options);

            return output;
        }

        /// <summary>
        /// Ova metoda dohvata formatiran json string.
        /// </summary>
        /// <param name="unprettyJson"></param>
        /// <returns></returns>
        public string DohvatiFormatiranJSON(string json)
        {
            var options = new JsonSerializerOptions() { WriteIndented = true };

            try
            {
                var jsonElement = JsonSerializer.Deserialize<JsonElement>(json);

                return JsonSerializer.Serialize(jsonElement, options);
            }
            catch (Exception e)
            {
                throw e;
            }
        }
    }