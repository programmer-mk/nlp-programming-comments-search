// metod koji pretvara segment2 u segment1, i kreira novi segment2 duzine nula na
// kraju novog segment1 (sto je odredjeno parametrom kraj)

private void promeniSegmente(Point kraj)
{
    // Segmenti 1 i 2 menjaju mesta
    segment1 = segment2;
    segment1.postaviStepeneSlobode(
        new StepeniSlobode(new Pravac[] { segment1.dajPravac() }),
        new StepeniSlobode(new Pravac[] { }), kraj);
    segment2 = new RastegljivSegment(kraj, kraj, this, 0,
        new StepeniSlobode(new Pravac[] { segment1.dajPravac() }),
        new StepeniSlobode(new Pravac[] { Pravac.Hor, Pravac.Vert }));
    segment2.postaviPravac(Prostor.suprotanPravac(segment1.dajPravac()));
    segment2.pocniPomeranje();
}

https://github.com/stankela/Editor/blob/05ec1fc9b9b08494ce4f0a80bdb6e656d2a4b644/Editor/Sema.cs