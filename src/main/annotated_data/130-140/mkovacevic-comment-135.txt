// deli vezu Veza na dva dela(dve veze) kreiranjem cvora na mestu Polozaj,
// i vraca cvor kao rezultat

protected Cvor podeliVezu(Veza veza, Point polozaj)
{
    Cvor cvor = new Cvor(polozaj, veza.dajSemu(), dajNoviID());
    Cvor pocCvor = veza.dajPrviCvor();
    Cvor krajCvor = veza.dajDrugiCvor();
    bool selektovana = veza.selektovan();

    // napravi dve nove veze
    Veza novaVeza = new Veza(pocCvor, cvor, dajNoviID());
    if (selektovana)
        novaVeza.selektuj();
    veze.Add(novaVeza);
    novaVeza = new Veza(cvor, krajCvor, dajNoviID());
    if (selektovana)
        novaVeza.selektuj();
    veze.Add(novaVeza);
    // veza sa uklanja tek nakon sto se postave dve nove veze zato sto prilikom
    // uklanjanja veza moze doci do uklanjanja cvora na krajevima veze (ako u
    // cvoru postoji samo ta veza). Ovako, kada se prvo dodaju dve nove veze pa tek
    // nakon toga ukloni stara veza sigurno je da ce cvorovi na kraju veze ostati
    // tu gde jesu
    ukloniVezu(veza);

    cvorovi.Add(cvor);
    return cvor;
}

https://github.com/stankela/Editor/blob/05ec1fc9b9b08494ce4f0a80bdb6e656d2a4b644/Editor/Sema.cs